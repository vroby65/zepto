#!/bin/sh

# Funzione per eseguire comandi con privilegi di root (usa sudo o su -c)
run_as_root() {
  if command -v sudo >/dev/null 2>&1; then
    sudo "$@"
  else
    su -c "$*"
  fi
}

# Compile zepto (optional, remove if already compiled)
if [ -f zt.c ]; then
  echo "Building zepto..."
  gcc -Os -o zt zt.c || { echo "Build error"; exit 1; }
fi

# Copy binary
echo "Installing zepto to /usr/local/bin..."
run_as_root cp zt /usr/local/bin/ || { echo "Error copying zepto"; exit 1; }

# Create config directory
echo "Creating ~/.config/zt/languages directory..."
mkdir -p ~/.config/zt/languages

# Copy language folder (assumed to be in the same dir as this script)
echo "Copying language files..."
cp -r languages/* ~/.config/zt/languages/

echo "Installation completed!"
